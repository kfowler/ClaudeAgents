{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://claude-agents.dev/schemas/creative/common-types.json",
  "title": "Creative Agent System - Common Type Definitions",
  "description": "Shared type definitions for creative agent structured outputs",

  "definitions": {
    "agent_id": {
      "type": "string",
      "description": "Identifier for the agent that produced this output",
      "enum": [
        "creative-catalyst",
        "the-inventor",
        "the-synthesist",
        "the-architect-of-experiments",
        "the-dreamer",
        "the-builder",
        "the-experimenter"
      ]
    },

    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of report generation"
    },

    "version": {
      "type": "string",
      "pattern": "^v\\d+\\.\\d+$",
      "description": "Schema version (e.g., 'v1.0')",
      "examples": ["v1.0", "v1.1", "v2.0"]
    },

    "novelty_score": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0,
      "description": "Novelty rating from 0.0 (conventional) to 1.0 (groundbreaking)",
      "examples": [0.3, 0.7, 0.95]
    },

    "confidence_score": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0,
      "description": "Confidence level from 0.0 (uncertain) to 1.0 (highly confident)",
      "examples": [0.5, 0.8, 0.95]
    },

    "kill_condition": {
      "description": "Falsifiable condition that would invalidate a claim or hypothesis",
      "oneOf": [
        {
          "type": "string",
          "description": "Simple kill condition (legacy format)",
          "minLength": 10,
          "examples": [
            "If average completion time is not <6 minutes after 100 users, kill experiment",
            "Kill if completion rate is not >70% after 200 users"
          ]
        },
        {
          "type": "object",
          "description": "Structured kill condition (recommended format)",
          "required": ["description", "threshold", "measurement_window"],
          "properties": {
            "description": {
              "type": "string",
              "description": "Clear description of what triggers experiment termination",
              "minLength": 10,
              "examples": [
                "Terminate if treatment group shows ≥10% decrease in D1 retention",
                "Kill if no improvement over baseline after minimum sample size"
              ]
            },
            "threshold": {
              "type": "string",
              "description": "Quantitative threshold for the kill condition",
              "minLength": 5,
              "examples": [
                "D1 retention drop ≥10%",
                "< 20% baseline engagement",
                "> 40 hours development time"
              ]
            },
            "measurement_window": {
              "type": "string",
              "description": "When to evaluate this kill condition",
              "minLength": 3,
              "examples": [
                "24 hours",
                "After first 100 users",
                "48 hours"
              ]
            },
            "auto_terminate": {
              "type": "boolean",
              "description": "Whether to automatically terminate when condition met"
            }
          },
          "additionalProperties": false
        }
      ]
    },

    "success_metric": {
      "description": "Measurable criteria defining success",
      "oneOf": [
        {
          "type": "object",
          "description": "Structured success metric (recommended format)",
          "required": ["name", "description", "unit", "target_value", "threshold_type", "measurement_method"],
          "properties": {
            "name": {
              "type": "string",
              "description": "Name of the success metric",
              "minLength": 5,
              "examples": [
                "D7 Retention Rate Increase",
                "User Satisfaction Score Increase"
              ]
            },
            "description": {
              "type": "string",
              "description": "Clear description of what is being measured",
              "minLength": 10,
              "examples": [
                "Percentage of users returning on Day 7",
                "Post-experiment satisfaction survey (1-10 scale)"
              ]
            },
            "unit": {
              "type": "string",
              "description": "Unit of measurement",
              "minLength": 1,
              "examples": ["percentage points", "scale points", "percentage", "seconds", "count"]
            },
            "target_value": {
              "type": "number",
              "description": "Numeric target value for success"
            },
            "threshold_type": {
              "type": "string",
              "enum": ["minimum", "maximum", "exact"],
              "description": "Type of threshold (minimum, maximum, or exact match)"
            },
            "measurement_method": {
              "type": "string",
              "description": "How to measure this metric",
              "minLength": 10,
              "examples": [
                "Cohort analysis tracking unique users returning exactly 7 days after first session",
                "In-app survey delivered at 72h mark, minimum 200 responses per group"
              ]
            },
            "baseline": {
              "type": "number",
              "description": "Current baseline value for comparison"
            }
          },
          "additionalProperties": false
        },
        {
          "type": "object",
          "description": "Simple success metric (legacy format)",
          "required": ["metric", "target"],
          "properties": {
            "metric": {
              "type": "string",
              "description": "Name of the success metric",
              "minLength": 5,
              "examples": [
                "User engagement rate",
                "Task completion time",
                "Error rate reduction"
              ]
            },
            "target": {
              "type": "string",
              "description": "Target value or threshold for success",
              "minLength": 3,
              "examples": [
                "> 60% engagement",
                "< 30 seconds completion time",
                "< 5% error rate"
              ]
            },
            "measurement_method": {
              "type": "string",
              "description": "How to measure this metric",
              "minLength": 10,
              "examples": [
                "Analytics event tracking",
                "Performance monitoring APM",
                "Error logging and alerting system"
              ]
            },
            "baseline": {
              "type": "string",
              "description": "Current baseline value for comparison",
              "examples": [
                "Current: 35% engagement",
                "Current: 90 seconds",
                "Current: 12% error rate"
              ]
            }
          },
          "additionalProperties": false
        }
      ]
    },

    "evidence_quality": {
      "type": "string",
      "enum": ["strong", "moderate", "weak", "speculative"],
      "description": "Quality assessment of supporting evidence"
    },

    "dimension_tag": {
      "type": "string",
      "description": "Category dimension for diversity tracking",
      "enum": [
        "mechanism",
        "experience",
        "market",
        "data_approach",
        "implementation",
        "user_segment",
        "technology",
        "business_model"
      ]
    },

    "metadata": {
      "type": "object",
      "description": "Standard metadata for all creative outputs",
      "properties": {
        "session_id": {
          "type": "string",
          "description": "Unique identifier for this creative session",
          "pattern": "^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$"
        },
        "context": {
          "type": "string",
          "description": "Problem or opportunity context for this creative work",
          "minLength": 20
        },
        "constraints": {
          "type": "array",
          "description": "Known constraints influencing creative exploration",
          "items": {
            "type": "string",
            "minLength": 10
          }
        },
        "tags": {
          "type": "array",
          "description": "Categorical tags for organization and retrieval",
          "items": {
            "type": "string",
            "minLength": 2
          }
        },
        "related_sessions": {
          "type": "array",
          "description": "References to related creative sessions",
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": true
    }
  }
}
